function initForm(){const e=document.getElementById("registrationForm"),t=document.getElementById("name"),n=document.getElementById("phone"),o=document.getElementById("nameError"),d=document.getElementById("phoneError"),a=document.getElementById("selectedCountryCode"),l=document.getElementById("countryDropdown"),i=document.getElementById("dropdownIcon"),c=document.getElementById("unlockBtn"),r=document.getElementById("timer");let s=1800;const m=e=>String(e).padStart(2,"0"),p=e=>{const t=`${m(Math.floor(e/60))}:${m(e%60)}`;r.textContent!==t&&(r.textContent=t),c&&c.textContent!==`Ro'yxatdan o'tish (${t})`&&(c.textContent=`Ro'yxatdan o'tish (${t})`)};e&&(e.style.display="none"),c&&(c.disabled=!0,c.setAttribute("aria-disabled","true"),p(s)),c&&c.addEventListener("click",()=>{c.disabled||(c.style.display="none",e&&(e.style.display="block",setTimeout(()=>t?.focus(),0)))});const u=[{name:"Uzbekistan",code:"+998"},{name:"AQSH",code:"+1"},{name:"Janubiy Koreya",code:"+82"},{name:"Qirg'iziston",code:"+996"},{name:"Qozog'iston",code:"+7"},{name:"Tojikiston",code:"+992"},{name:"Turkmaniston",code:"+993"},{name:"Polsha",code:"+48"}],y={"+998":{ph:"88 888 88 88",re:/^\d{2} \d{3} \d{2} \d{2}$/,cut:9,max:12},"+1":{ph:"555 123 4567",re:/^\d{3} \d{3} \d{4}$/,cut:10,max:12},"+82":{ph:"10 1234 5678",re:/^\d{2} \d{4} \d{4}$/,cut:10,max:12},"+996":{ph:"555 123 456",re:/^\d{3} \d{3} \d{3}$/,cut:9,max:11},"+7":{ph:"700 123 4567",re:/^\d{3} \d{3} \d{4}$/,cut:10,max:12},"+992":{ph:"55 555 5555",re:/^\d{2} \d{3} \d{4}$/,cut:9,max:11},"+993":{ph:"6 123 4567",re:/^\d{1} \d{3} \d{4}$/,cut:8,max:10},"+48":{ph:"123 456 789",re:/^\d{3} \d{3} \d{3}$/,cut:9,max:11}};let h="+998";n.placeholder=y[h].ph,n.maxLength=y[h].max,n.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"").slice(0,y[h].cut);"+998"===h&&(t.length>2&&t.length<=5?t=t.replace(/(\d{2})(\d{0,3})/,"$1 $2"):t.length>5&&t.length<=7?t=t.replace(/(\d{2})(\d{3})(\d{0,2})/,"$1 $2 $3"):t.length>7&&(t=t.replace(/(\d{2})(\d{3})(\d{2})(\d{0,2})/,"$1 $2 $3 $4"))),e.target.value=t,d.style.display="none"}),t.addEventListener("input",()=>o.style.display="none"),e.addEventListener("submit",a=>{if(a.preventDefault(),!t.value.trim())return void(o.style.display="block");if(!y[h].re.test(n.value))return void(d.style.display="block");const l={name:t.value.trim(),phone:`${h} ${n.value}`,time:(new Date).toLocaleString("uz-UZ"),uid:Date.now().toString()};localStorage.setItem("FormData",JSON.stringify(l)),e.querySelector("button").disabled=!0,window.location.href="/thankYou.html"}),requestIdleCallback(function(){const e=setInterval(()=>{s--,s<=0?(clearInterval(e),c&&(c.disabled=!1,c.removeAttribute("aria-disabled"),c.textContent="Ro'yxatdan o'tish"),r.textContent="00:00"):p(s)},1e3)}),requestIdleCallback(function(){a.addEventListener("click",()=>{const e="block"===l.style.display;l.style.display=e?"none":"block",i.innerHTML=e?'<polyline points="6 9 12 15 18 9"></polyline>':'<polyline points="18 15 12 9 6 15"></polyline>',e||(l.innerHTML="",u.forEach(e=>{const t=document.createElement("div");t.className="country-option",t.innerHTML=`<span>${e.name}</span><span class="country-code">${e.code}</span>`,t.onclick=()=>{h=e.code,a.textContent=e.code,l.style.display="none",n.placeholder=y[e.code].ph,n.maxLength=y[e.code].max,n.value="",d.style.display="none",i.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'},l.appendChild(t)}))}),document.addEventListener("click",e=>{a.contains(e.target)||l.contains(e.target)||(l.style.display="none",i.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>')})})}function startApp(){requestAnimationFrame(()=>{requestIdleCallback(()=>initForm(),{timeout:500})}),setTimeout(()=>{import("./analytics.js").catch(()=>{})},3e3)}"complete"===document.readyState||"interactive"===document.readyState?startApp():document.addEventListener("DOMContentLoaded",startApp);